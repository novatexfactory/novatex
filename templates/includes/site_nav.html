{# Renders top-level nav from the site root. Expects `home_item` and `nav_items` in context. #}
{% load wagtailcore_tags wagtailimages_tags static %}
{% comment %} Accessible menu: top-level has role=menubar, items role=menuitem, dropdown role=menu {% endcomment %}
{% if home_item %}
  <div class="nav-inner">
    <button id="nav-toggle" class="nav-toggle" aria-controls="site-menu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>

    <div class="site-brand">
      <a href="{% pageurl home_item.item %}" class="home-link">
        <img src="{% static 'img/novatex-logo.png' %}" alt="{{ home_item.item.title }} logo" class="brand-logo">
        <span class="brand-text">Home</span>
      </a>
    </div>

    <div role="menubar" aria-label="Main navigation" class="site-menubar">
      {% for entry in nav_items %}
        <div class="nav-item{% if entry.active %} active{% endif %}" role="none">
          <a role="menuitem" href="{{ entry.item.url }}" class="nav-link" aria-haspopup="{{ entry.children|length|yesno:'true,false' }}" aria-expanded="false">{{ entry.item.title }}</a>

          {% if entry.children %}
            <div class="dropdown" role="menu" aria-label="{{ entry.item.title }} submenu">
              {% for child in entry.children %}
                <a role="menuitem" class="dropdown-item" href="{{ child.url }}">{{ child.title }}</a>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
{% endif %}
